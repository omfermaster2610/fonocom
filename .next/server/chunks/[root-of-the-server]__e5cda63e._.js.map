{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omars/Documents/OMAR/prototipo/fonocom/db.ts"],"sourcesContent":["import dotenv from 'dotenv';\r\ndotenv.config();\r\n\r\nimport { Pool } from 'pg';\r\n\r\nconsole.log(\"Conectando con DATABASE_URL...\");\r\nconsole.log(\"DATABASE_URL:\", process.env.DATABASE_URL || \"No definida\");\r\n\r\nconst db = new Pool({\r\n  connectionString: process.env.DATABASE_URL,\r\n  ssl: {\r\n    rejectUnauthorized: false,\r\n  },\r\n});\r\n\r\n// Probar conexión al iniciar\r\ndb.connect()\r\n  .then((client) => {\r\n    return client\r\n      .query('SELECT NOW()')\r\n      .then((res) => {\r\n        console.log(\"Conexión a PostgreSQL exitosa. Hora actual:\", res.rows[0].now);\r\n        client.release();\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error al ejecutar query de prueba:\", err);\r\n        client.release();\r\n      });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"No se pudo conectar a la base de datos:\", err);\r\n  });\r\n\r\nexport default db;\r\n"],"names":[],"mappings":";;;AAAA;AAGA;;;;;;AAFA,uIAAA,CAAA,UAAM,CAAC,MAAM;;AAIb,QAAQ,GAAG,CAAC;AACZ,QAAQ,GAAG,CAAC,iBAAiB,QAAQ,GAAG,CAAC,YAAY,IAAI;AAEzD,MAAM,KAAK,IAAI,oGAAA,CAAA,OAAI,CAAC;IAClB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK;QACH,oBAAoB;IACtB;AACF;AAEA,6BAA6B;AAC7B,GAAG,OAAO,GACP,IAAI,CAAC,CAAC;IACL,OAAO,OACJ,KAAK,CAAC,gBACN,IAAI,CAAC,CAAC;QACL,QAAQ,GAAG,CAAC,+CAA+C,IAAI,IAAI,CAAC,EAAE,CAAC,GAAG;QAC1E,OAAO,OAAO;IAChB,GACC,KAAK,CAAC,CAAC;QACN,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,OAAO;IAChB;AACJ,GACC,KAAK,CAAC,CAAC;IACN,QAAQ,KAAK,CAAC,2CAA2C;AAC3D;uCAEa","debugId":null}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omars/Documents/OMAR/prototipo/fonocom/src/app/api/usuario/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport db from '../../../../db'\r\n\r\nexport async function GET(req: Request) {\r\n  const { searchParams } = new URL(req.url)\r\n  const username = searchParams.get('username')\r\n\r\n  if (!username) {\r\n    return NextResponse.json({ error: 'Username requerido' }, { status: 400 })\r\n  }\r\n\r\n  try {\r\n    // Buscar usuario\r\n    const userResult = await db.query(\r\n      'SELECT username FROM usuarios WHERE username = $1',\r\n      [username]\r\n    )\r\n\r\n    if (userResult.rowCount === 0) {\r\n      return NextResponse.json({ error: 'Usuario no encontrado' }, { status: 404 })\r\n    }\r\n\r\n    const user = userResult.rows[0]\r\n\r\n    // Buscar progreso del usuario\r\n    const progresoResult = await db.query(\r\n      'SELECT comunicacion, empleo, ideas FROM progreso WHERE idusuario = $1',\r\n      [user.id]\r\n    )\r\n\r\n    const progreso = progresoResult.rows[0] || {\r\n      comunicacion: 0,\r\n      empleo: 0,\r\n      ideas: 0\r\n    }\r\n\r\n    return NextResponse.json({\r\n      username: user.username,\r\n      progreso\r\n    })\r\n  } catch (error) {\r\n    console.error('Error al obtener usuario:', error)\r\n    return NextResponse.json({ error: 'Error del servidor' }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;;;;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACb,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1E;IAEA,IAAI;QACF,iBAAiB;QACjB,MAAM,aAAa,MAAM,oGAAA,CAAA,UAAE,CAAC,KAAK,CAC/B,qDACA;YAAC;SAAS;QAGZ,IAAI,WAAW,QAAQ,KAAK,GAAG;YAC7B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,OAAO,WAAW,IAAI,CAAC,EAAE;QAE/B,8BAA8B;QAC9B,MAAM,iBAAiB,MAAM,oGAAA,CAAA,UAAE,CAAC,KAAK,CACnC,yEACA;YAAC,KAAK,EAAE;SAAC;QAGX,MAAM,WAAW,eAAe,IAAI,CAAC,EAAE,IAAI;YACzC,cAAc;YACd,QAAQ;YACR,OAAO;QACT;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,UAAU,KAAK,QAAQ;YACvB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACF","debugId":null}}]
}