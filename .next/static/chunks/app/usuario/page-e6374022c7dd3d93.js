(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6765],{1638:(e,s,r)=>{"use strict";r.d(s,{default:()=>i});var a=r(5155),o=r(2115),l=r(6874),t=r.n(l);function n(e){let{isOpen:s,onClose:r}=e,[l,n]=(0,o.useState)(null),i=e=>{n(s=>s===e?null:e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-300 z-20 ".concat(s?"translate-x-0":"-translate-x-full"),style:{padding:"0 1.5rem"},children:[(0,a.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,a.jsx)("button",{onClick:r,className:"text-lg justify-end mb-6 cursor-pointer hover:transform hover:scale-110",children:(0,a.jsx)("p",{className:"text-2xl",children:"X"})}),(0,a.jsxs)("ul",{className:"space-y-4 cursor-pointer",children:[(0,a.jsx)(t(),{href:"/homepage",children:(0,a.jsx)("li",{className:"cursor-pointer",children:"Inicio"})}),(0,a.jsx)(t(),{href:"/usuario",children:(0,a.jsx)("li",{className:"cursor-pointer",children:"Usuario"})})]}),(0,a.jsx)("button",{className:"w-full text-left font-semibold hover:text-lime-600",onClick:()=>i("programas"),children:"Programas"}),(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-600 ".concat("programas"===l?"max-h-96":"max-h-0"),children:"programas"===l&&(0,a.jsxs)("ul",{className:"pl-4 mt-2 space-y-1 text-sm text-gray-700",children:[(0,a.jsx)(t(),{href:"/programas/comunicacion",children:(0,a.jsx)("li",{className:"hover:text-lime-600 cursor-pointer",children:"Comunicaci\xf3n"})}),(0,a.jsx)(t(),{href:"/programas/empleo",children:(0,a.jsx)("li",{className:"hover:text-lime-600 cursor-pointer",children:"Empleo y trabajo"})}),(0,a.jsx)(t(),{href:"/programas/negocio",children:(0,a.jsx)("li",{className:"hover:text-lime-600 cursor-pointer",children:"Ideas de negocio"})})]})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(t(),{href:"/actividades",children:(0,a.jsx)("button",{className:"w-full text-left font-semibold cursor-pointer hover:text-lime-600",children:"Actividades"})})}),(0,a.jsx)("button",{className:"w-full text-left font-semibold cursor-pointer hover:text-lime-600",children:(0,a.jsx)(t(),{href:"/login",children:"Cerrar sesi\xf3n"})})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black opacity-40 z-10",onClick:r})]})}function i(){let[e,s]=(0,o.useState)(!1),[r,l]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=localStorage.getItem("user");if(console.log("Usuario guardado:",e),!e)return;let{username:s}=JSON.parse(e);console.log("Buscando usuario:",s),fetch("/api/usuario?username=".concat(s)).then(e=>e.json()).then(e=>{console.log("Usuario encontrado:",e),l(e)}).catch(e=>console.error("Error al obtener usuario:",e))},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"bg-lime-500 text-gray-900 w-full z-10",children:(0,a.jsxs)("div",{className:"w-full max-w-screen-xl mx-auto flex items-center justify-between h-16",style:{padding:"0 1.5rem"},children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center gap-1 cursor-pointer",onClick:()=>s(!0),children:[(0,a.jsx)("div",{className:"w-6 h-0.5 bg-black"}),(0,a.jsx)("div",{className:"w-6 h-0.5 bg-black"}),(0,a.jsx)("div",{className:"w-6 h-0.5 bg-black"})]}),(0,a.jsxs)("div",{className:"text-sm",children:["Bienvenido/a. ",r?r.username:"Cargando..."]})]})}),(0,a.jsx)(n,{isOpen:e,onClose:()=>s(!1)})]})}},1992:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var a=r(5155),o=r(2115),l=r(1638),t=r(8244),n=r(5695);function i(){let[e,s]=(0,o.useState)(null),[r,i]=(0,o.useState)({username:"",password:""}),c=(0,n.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("user");if(console.log("Usuario guardado:",e),!e)return;let{username:r}=JSON.parse(e);console.log("Buscando usuario:",r),fetch("/api/usuario?username=".concat(r)).then(e=>e.json()).then(e=>{console.log("Usuario encontrado:",e),s(e),i({username:e.username,password:""})}).catch(e=>console.error("Error al obtener usuario:",e))},[]);let d=async e=>{e.preventDefault();let a=JSON.parse(localStorage.getItem("user")||"{}"),o=await fetch("/api/usuario/actualizar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,newUsername:r.username,newPassword:r.password})});if(o.ok){let e=await o.json();s(e.user),localStorage.setItem("user",JSON.stringify(e.user)),alert("Datos actualizados correctamente")}else alert("Error al actualizar")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("main",{className:"p-6 flex",style:{padding:"0 1.5rem"},children:[(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("br",{}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("p",{className:"text-xl font-semibold mb-4",children:["Bienvenido/a ",e?e.username:"Cargando..."]}),(0,a.jsx)("br",{}),e?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:["Progreso en Comunicaci\xf3n: ",e.progreso.comunicacion,"%"]}),(0,a.jsxs)("p",{children:["Progreso en Empleo: ",e.progreso.empleo,"%"]}),(0,a.jsxs)("p",{children:["Progreso en Ideas: ",e.progreso.ideas,"%"]})]}):(0,a.jsx)("p",{children:"Cargando progreso..."})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("section",{children:[(0,a.jsx)("p",{className:"dlex flex-col text-xl font-semibold mb-4",children:"Modificar usuario"}),(0,a.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block font-semibold",children:"Usuario:"}),(0,a.jsx)("input",{type:"text",id:"username",value:r.username,onChange:e=>i({...r,username:e.target.value}),className:"border border-black px-2 py-1"})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block font-semibold",children:"Contrase\xf1a:"}),(0,a.jsx)("input",{type:"password",id:"password",value:r.password,onChange:e=>i({...r,password:e.target.value}),className:"border border-black px-2 py-1"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{type:"submit",className:"button bg-lime-500 px-4 py-2 rounded font-bold",children:"Guardar"})]})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),c.push("/login")},className:"mt-4 bg-red-500 text-white px-4 py-2",children:"Cerrar sesi\xf3n"})]}),(0,a.jsx)("aside",{className:" w-64 p-4 border-l border-gray-300 shrink-0 justify-center",children:(0,a.jsx)("img",{src:"/gifs/usuario.webp",alt:"Comunicaci\xf3n",className:"w-192 h-192"})})]}),(0,a.jsx)(t.A,{})]})}},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})},7679:(e,s,r)=>{Promise.resolve().then(r.bind(r,1992))},8244:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var a=r(5155);r(2115);let o=()=>(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("footer",{className:"mb-0 bottom-0 left-0 right-0 p-4 text-center",children:[(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"\xa9 2025 Fonocom. Todos los derechos reservados."})]})})}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,8441,1684,7358],()=>s(7679)),_N_E=e.O()}]);